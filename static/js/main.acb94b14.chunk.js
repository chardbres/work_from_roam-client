(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,a){},104:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),l=a.n(o),s=(a(62),a(6)),c=a(7),i=a(9),p=a(8),u=a(10),m=(a(63),a(38)),h=a.n(m),d=a(53),g=a(26),f=a.n(g),b=a(21),E=(a(83),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(p.a)(t).call(this,e))).setQuery=function(e){a.setState({query:e})},a.handleAutocompleteSelect=function(){var e=Object(d.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.geocodeByAddress)(t);case 2:return n=e.sent,e.next=5,Object(g.getLatLng)(n[0]);case 5:r=e.sent,a.props.setApp({coordinates:r}),a.props.setApp({placeData:n[0]});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={query:""},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,{value:this.state.query,onChange:this.setQuery,onSelect:this.handleAutocompleteSelect},(function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,o=e.loading;return r.a.createElement("div",{className:"search-bar"},r.a.createElement("input",Object.assign({style:{height:"40px",width:"100%",fontSize:"16px"}},t({placeholder:"Search Places ...",className:"location-search-input"}))),r.a.createElement("div",{className:"autocomplete-dropdown-container"},o&&r.a.createElement("div",null,"Loading..."),a.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return r.a.createElement("div",n(e,{className:t,style:a}),r.a.createElement("span",null,e.description))}))))}))}}]),t}(r.a.Component)),v=Object(b.GoogleApiWrapper)({apiKey:"AIzaSyBr0KBe6OYC3MKAmWh4nfTPQrCQT6ei-O8"})(E),w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(p.a)(t).call(this,e))).state={test:!0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"test component"),r.a.createElement("p",null,this.props.placeData&&this.props.placeData.formatted_address),r.a.createElement("a",{rel:"noopener noreferrer",href:"https://developers.google.com/maps/documentation/javascript/tutorial",target:"_blank"},r.a.createElement("button",null,"display link to create a review")),r.a.createElement("p",null,this.props.placeData&&this.props.placeData.place_id))}}]),t}(r.a.Component),C=a(15),O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(p.a)(t).call(this,e))).url="http://localhost:3000",a.executeTest=function(){console.log("test button")},a.state={test:!0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){Object(g.geocodeByPlaceId)(this.props.placeId).then(console.log)}},{key:"render",value:function(){return r.a.createElement(C.a,null,r.a.createElement(C.b,{to:"/new"},r.a.createElement("button",null,"Add a Review")))}}]),t}(r.a.Component),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(p.a)(t).call(this,e))).state={test:!0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e="";return this.props.placeData&&!this.props.placeData.photos&&(e="https://1m19tt3pztls474q6z46fnk9-wpengine.netdna-ssl.com/wp-content/themes/unbound/images/No-Image-Found-400x264.png"),this.props.placeData&&this.props.placeData.photos&&(e=this.props.placeData.photos[0].getUrl()),this.props.placeData?r.a.createElement("div",null,r.a.createElement("img",{height:"200px",alt:"pic",src:e}),r.a.createElement("h1",null,this.props.placeData.name),r.a.createElement("p",null,r.a.createElement("strong",null,"google place_id: "),this.props.placeData.reference||"unknown"),r.a.createElement(O,{placeId:this.props.placeData.reference})):r.a.createElement("div",null,r.a.createElement("h3",null,"Loading..."))}}]),t}(r.a.Component),j=a(17),y=a.n(j),S="https://murmuring-anchorage-97253.herokuapp.com/",I="http://localhost:4741";window.location.hostname;var D=S,L=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(p.a)(t).call(this))).componentDidMount=function(){navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){console.log("found user location");var a=t.coords,n=a.latitude,r=a.longitude;e.props.setApp({mapCenter:{lat:n,lng:r}})})),y()(D+"/work_spaces").then((function(t){console.log(t),e.setState({allData:t.data.work_spaces})}))},e.onMarkerClick=function(t,a,n){e.setState({selectedMarker:a,showWindow:!0})},e.onInfoWindowClose=function(){e.setState({showWindow:!1})},e.showPOI=function(t,a){e.props.setApp({poiLocation:{lat:a.latLng.lat(),lng:a.latLng.lng()},mapCenter:{lat:a.latLng.lat(),lng:a.latLng.lng()},placeData:null,placeId:a.placeId});var n=new e.props.google.maps.places.PlacesService(t);console.log("service is:",n),n.getDetails({placeId:a.placeId,fields:["name","website","formatted_phone_number","formatted_address","photo","reference","reviews"]},(function(t,a){console.log(t),e.props.setApp({placeData:t})}))},e.handleClick=function(t,a,n){n.placeId&&e.showPOI(a,n)},e.state={selectedMarker:null,showWindow:!1,allData:[]},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(b.Map,{google:this.props.google,center:this.props.center,initialCenter:this.props.center,zoom:14,clickableIcons:!0,onClick:this.handleClick},r.a.createElement(b.InfoWindow,{position:this.props.poiLocation,visible:!0},r.a.createElement(k,{placeData:this.props.placeData})),this.state.allData.map((function(t){return r.a.createElement(b.Marker,{onClick:e.onMarkerClick,position:{lat:t.lat,lng:t.lng},placeId:t.placeId,data:t,name:"Current location"})})),r.a.createElement(b.InfoWindow,{marker:this.state.selectedMarker,visible:this.state.showWindow,onClose:this.onInfoWindowClose},r.a.createElement(w,{placeData:this.props.placeData})))}}]),t}(r.a.Component),A=Object(b.GoogleApiWrapper)({apiKey:"AIzaSyBr0KBe6OYC3MKAmWh4nfTPQrCQT6ei-O8"})(L),W=a(25),P=(a(103),a(20)),x=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){console.log(e.target.value),console.log(e.target.name),a.setState(Object(W.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),y()({method:"post",url:D+"/work_spaces",data:{work_space:{place_id:a.props.placeId,lat:a.props.location.lat,lng:a.props.location.lng}},headers:{Authorization:"Token token=".concat(a.props.user.token)}}).then((function(e){console.log(e),y()({method:"post",url:D+"/reviews",data:{review:{rating:a.state.rating,note:a.state.review,work_space_id:e.data.work_space.id}},headers:{Authorization:"Token token=".concat(a.props.user.token)}}).then((function(e){console.log(e),a.setState({display:"none"})}))})).catch((function(){return alert("create review failed")}))},a.closeWindow=function(){a.setState({display:"none"})},a.state={rating:3,review:"",display:"block",redirect:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.user?r.a.createElement("div",{className:"review-form",style:{display:this.state.display}},r.a.createElement(C.b,{to:"/"},r.a.createElement("button",{style:{float:"right"},onClick:this.closeWindow},"Close")),r.a.createElement("h1",null," Review "),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null," Rating: "),r.a.createElement("input",{name:"rating",type:"range",min:"0",max:"5",value:this.state.rating,onChange:this.handleChange}),r.a.createElement("p",null,this.state.rating),r.a.createElement("label",null," Review: "),r.a.createElement("textarea",{name:"review",value:this.state.review,onChange:this.handleChange,required:!0}),r.a.createElement("button",null," Submit "))):r.a.createElement(P.a,{to:"/sign-in"})}}]),t}(r.a.Component),_=function(e){return y()({url:D+"/sign-in",method:"POST",data:{credentials:{email:e.email,password:e.password}}})},U=a(5),N=a(29),M=(a(104),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(p.a)(t).call(this))).handleChange=function(t){return e.setState(Object(W.a)({},t.target.name,t.target.value))},e.onSignUp=function(t){t.preventDefault();var a,n=e.props,r=n.history,o=n.setUser;(a=e.state,y()({method:"POST",url:D+"/sign-up",data:{credentials:{email:a.email,password:a.password,password_confirmation:a.passwordConfirmation}}})).then((function(){return _(e.state)})).then((function(e){return o(e.data.user)})).then((function(){return r.push("/")})).catch((function(t){console.error(t),e.setState({email:"",password:"",passwordConfirmation:""})})),console.log("signUp: "+e.state.email)},e.state={email:"",password:"",passwordConfirmation:""},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.passwordConfirmation;return r.a.createElement("div",{className:"row body sign-up"},r.a.createElement("div",{className:"col-sm-10 col-md-8 mx-auto mt-5"},r.a.createElement(C.b,{to:"/"},r.a.createElement("button",{style:{float:"right"},onClick:this.closeWindow},"Close")),r.a.createElement("h3",null,"Sign Up"),r.a.createElement(U.a,{onSubmit:this.onSignUp},r.a.createElement(U.a.Group,{controlId:"email"},r.a.createElement(U.a.Label,null,"Email address"),r.a.createElement(U.a.Control,{required:!0,type:"email",name:"email",value:t,placeholder:"Enter email",onChange:this.handleChange})),r.a.createElement(U.a.Group,{controlId:"password"},r.a.createElement(U.a.Label,null,"Password"),r.a.createElement(U.a.Control,{required:!0,name:"password",value:a,type:"password",placeholder:"Password",onChange:this.handleChange})),r.a.createElement(U.a.Group,{controlId:"passwordConfirmation"},r.a.createElement(U.a.Label,null,"Password Confirmation"),r.a.createElement(U.a.Control,{required:!0,name:"passwordConfirmation",value:n,type:"password",placeholder:"Confirm Password",onChange:this.handleChange})),r.a.createElement(N.a,{variant:"primary",type:"submit"},"Submit"))))}}]),t}(n.Component)),q=Object(P.f)(M),T=(a(106),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(p.a)(t).call(this))).handleChange=function(t){return e.setState(Object(W.a)({},t.target.name,t.target.value))},e.onSignIn=function(t){t.preventDefault();var a=e.props,n=a.history,r=a.setUser;_(e.state).then((function(e){return r(e.data.user)})).then((function(){return n.push("/")})).catch((function(t){console.error(t),e.setState({email:"",password:""})})),console.log("SignIn: "+e.state.email)},e.state={email:"",password:""},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement("div",{className:"row sign-in"},r.a.createElement("div",{className:"col-sm-10 col-md-8 mx-auto mt-5"},r.a.createElement(C.b,{to:"/"},r.a.createElement("button",{style:{float:"right"},onClick:this.closeWindow},"Close")),r.a.createElement("h3",null,"Sign In"),r.a.createElement(U.a,{onSubmit:this.onSignIn},r.a.createElement(U.a.Group,{controlId:"email"},r.a.createElement(U.a.Label,null,"Email address"),r.a.createElement(U.a.Control,{required:!0,type:"email",name:"email",value:t,placeholder:"Enter email",onChange:this.handleChange})),r.a.createElement(U.a.Group,{controlId:"password"},r.a.createElement(U.a.Label,null,"Password"),r.a.createElement(U.a.Control,{required:!0,name:"password",value:a,type:"password",placeholder:"Password",onChange:this.handleChange})),r.a.createElement(N.a,{variant:"primary",type:"submit"},"Submit"))))}}]),t}(n.Component)),B=Object(P.f)(T),z=a(23),G=a(28),F=r.a.createElement(n.Fragment,null,r.a.createElement(z.a.Link,{href:"#change-password"},"Change Password"),r.a.createElement(z.a.Link,{href:"#sign-out"},"Sign Out")),K=r.a.createElement(n.Fragment,null,r.a.createElement(z.a.Link,{href:"#sign-up"},"Sign Up"),r.a.createElement(z.a.Link,{href:"#sign-in"},"Sign In")),Q=r.a.createElement(n.Fragment,null,r.a.createElement(z.a.Link,{href:"#/"},"Home")),R=function(e){var t=e.user;return r.a.createElement(G.a,{collapseOnSelect:!0,fixed:"top",bg:"secondary",variant:"dark",expand:"md"},r.a.createElement(G.a.Brand,{href:"#"},"WorkFromRoam"),r.a.createElement(z.a,null,t&&r.a.createElement("span",{style:{color:"black"},className:"navbar-text mr-2"},"Welcome, ",t.email)),r.a.createElement(G.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(G.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(z.a,{className:"ml-auto"},Q,t?F:K)))},J=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(p.a)(t).call(this))).setUser=function(t){return e.setState({user:t})},e.clearUser=function(){return e.setState({user:null})},e.state={poiLocation:null,mapCenter:{lat:42.3601,lng:-71.0589},bounds:null,placeId:null,placeData:null,user:null},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.user;return r.a.createElement("div",null,r.a.createElement(n.Fragment,null,r.a.createElement(R,{user:t}),r.a.createElement(P.b,{path:"/new"},r.a.createElement(x,{user:t,placeId:this.state.placeId,placeData:this.state.placeData,location:this.state.poiLocation})),r.a.createElement(P.b,{path:"/sign-up",render:function(){return r.a.createElement(q,{setUser:e.setUser})}}),r.a.createElement(P.b,{path:"/sign-in",render:function(){return r.a.createElement(B,{user:t,setUser:e.setUser})}}),r.a.createElement(P.b,{path:"/"},r.a.createElement("div",{className:"App"},r.a.createElement(v,{setApp:this.setState.bind(this)}),r.a.createElement(A,{center:this.state.mapCenter,coordinates:this.state.coordinates,placeData:this.state.placeData,setApp:this.setState.bind(this),poiLocation:this.state.poiLocation})))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=r.a.createElement(C.a,null,r.a.createElement(J,null));l.a.render(Y,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},57:function(e,t,a){e.exports=a(107)},62:function(e,t,a){},63:function(e,t,a){},83:function(e,t,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.acb94b14.chunk.js.map